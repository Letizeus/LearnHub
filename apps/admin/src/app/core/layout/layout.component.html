<div class="layout">
  <!-- Mobile Header -->
  <header class="mobile-header">
    <button
      pButton
      type="button"
      icon="pi pi-bars"
      class="p-button-text menu-toggle"
      (click)="toggleMobileMenu()"
      aria-label="Toggle menu"
    ></button>
    <div class="brand-mobile">LearnHub Cockpit</div>
  </header>

  <!-- Backdrop for mobile menu -->
  @if (mobileMenuOpen()) {
    <div
      class="sidebar-backdrop"
      role="button"
      tabindex="0"
      (click)="closeMobileMenu()"
      (keydown.enter)="closeMobileMenu()"
      (keydown.escape)="closeMobileMenu()"
      aria-label="Close menu"
    ></div>
  }

  <!-- Sidebar -->
  <aside class="sidebar" [class.open]="mobileMenuOpen()">
    <div class="brand">LearnHub Cockpit</div>
    <nav>
      @for (item of items; track item.path) {
      <a
        [routerLink]="item.path"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: item.exact ?? true }"
        (click)="closeMobileMenu()"
      >
        <span class="icon" aria-hidden="true">
          <i [class]="item.icon"></i>
        </span>
        <span class="label">{{ item.label }}</span>
      </a>
      }
    </nav>
    <div class="sidebar-footer">
      <div class="user">
        <p-avatar icon="pi pi-user" shape="circle" size="normal"></p-avatar>
        <span class="user-name">{{ userLabel() }}</span>
      </div>
      <button
        pButton
        type="button"
        icon="pi pi-sign-out"
        class="p-button-text p-button-sm"
        (click)="logout()"
      >
        Logout
      </button>
    </div>
  </aside>

  <main class="content">
    <header class="topbar">
    </header>
    <section class="page">
      <router-outlet></router-outlet>
    </section>
  </main>
</div>
